# Введение в статистику {#desc-statintro}

{{< include other/_symbols.qmd >}}

```{r opts, echo=FALSE, eval=TRUE}
knitr::opts_chunk$set(echo = FALSE, eval = TRUE, warning = FALSE, message = FALSE, error = FALSE)
```

```{r pkgs}
library(tidyverse)
theme_set(theme_bw())
# library(plotly)
```

:::{.intro}
Итак, мы вплотную подошли к изучению статистики, однако прежде чем мы начнем разговор собственно о статистике, нам необходимо разобраться, что вообще это такое, когда́ оно нам жизненно необходимо и заче́м оно нам жизненно необходимо, чтобы первично сориентироваться в том, о чем мы будем говорить на протяжении всех последующих глав.

Так и поступим.
:::



## Исследовательский процесс {#desc-statintro-research-process}

:::{.lab-junior}
:::

Прежде всего, давайте сориентируемся в том, как устроен исследовательский процесс. В самом общем виде его можно разбить на различные этапы --- я предлагаю рассмотреть следующую схему (@fig-research-process-qq):

```{mermaid}
%%| label: fig-research-process-qq
%%| fig-cap: Соотношение качественных и количественных исследований в исследовательском процессе
%%| fig-align: center

flowchart TD
  idea("Идея исследования")
  literature("Изучение литературы")
  resques("Исследовательский_е вопрос_ы")
  qualres("Качественное исследование")
  hyps("Гипотеза_ы")
  quanres("Количественное исследование")
  results1("Осмысление результатов")
  results2("Осмысление результатов")
  newresq("Новый_е
          исследовательский_е вопрос_ы")
  newhyp("Новая_ые гипотеза_ы")
  
  idea --> literature
  literature --> resques
  resques --> qualres
  qualres --> results1
  results1 --> hyps
  hyps --> quanres
  quanres --> results2
  results2 --> newresq
  results2 --> newhyp
  newresq --> qualres
  newresq --> quanres
  newhyp --> quanres
```

Безусловно, любое исследование начинается с некоторой **идеи** --- что мы вообще собираемся изучать? Идею исследования можно взять практически откуда угодно: из жизненного опыта, повседневных наблюдений, видео на YouTube, поста в блоге или практического опыта, наконец, учебных материалов и научных статей. Однако идеи, как правило, недостаточно для того, чтобы спланировать исследование, поэтому далее мы идём в базы **научной литературы**, чтобы изучить интересующую нас область пока что теоретически --- что вообще по этому поводу уже наисследовано и написано, какие известны закономерности, может быть, уже разработаны даже какие-либо модели интересующих нас феноменов. Обычно изучение литературы заканчивается **теоретическим обзором**, который приводит нас к формулированию **исследовательского вопроса** --- одного или нескольких в зависимости от того, насколько широка была наша идея.

Имея результаты теоретического обзора и исследовательский вопрос мы можем пойти двумя путями: 

* если интересующая нас область достаточно хорошо исследована, наш исследовательский вопрос достаточно конкретный и обзор литературы позволяет нам сразу сформулировать к нему **гипотезы**, то мы можем перейти к планированию **количественного исследования**;
* если же интересующий нас феномен изучен недостаточно, мы не вполне пониманием, что мы собираемся исследовать и как сие организовано «в сознании людей», нам стоит сначала провести **качественное исследование**, чтобы получить больше информации для формулирования гипотез --- именно этот путь представлен на [иллюстрации @fig-research-process-qq].

Безусловно, качественные и количественные исследования существенно различаются собственной методологией, о чем подробнее можно прочитать в [приложении](appendix-research-design.qmd). Однако как качественное, так и количественное исследование заканчивается написанием отчёта какого-либо формата --- статьи, курсовой, дипломной работы или внутреннего отчета организации --- и приводит нас к **новым идеям, гипотезам и исследованиям**. Так, цикл исследовательского процесса замыкается и может повторяться бесконечно, ибо научное познание не имеет пределов.

Часто качественные и количественные исследования рассматривают изолированно друг от друга, что, на мой взгляд, не вполне соответствует исследовательской реальности. Конечно, исследования обоих типов могут проводится независимо друг от друга, если того требуют исследуемые феномены. Тем не менее, это вовсе не значит, что они никогда не встречаются друг с другом. Напротив, совмещение качественной и количественной методологии часто встречается в индустрии примерно в той логике, которая представлена на [иллюстрации @fig-research-process-qq], и именно поэтому мы уделили несколько абзацев её рассмотрению.

И всё же в силу того, что мы сосредоточены в этой книжке на изучении статистики и анализа количественных данных, далее мы будем рассматривать именно количественные исследования и начнем с того, что разберемся как в них устроен исследовательский процесс.



### Исследовательский процесс в количественных исследованиях {#desc-statintro-research-process-quan}

:::{.lab-junior}
:::

Итак, пусть мы решили, что проводим количественное исследование. Какие этапы нам предстоит пройти, прежде чем мы получим ответ на наш исследовательский вопрос? Снова представим процес в виде схемы (@fig-research-process-quan):

```{mermaid}
%%| label: fig-research-process-quan
%%| fig-cap: Исследовательский процесс в количественных исследованиях
%%| fig-align: center

flowchart TD
  idea("Идея исследования / Исследовательский вопрос")
  literature("Теоретический обзор")
  constructs("Конструкты")
  theorhyp("Теоретические гипотезы")
  design("Дизайн исследования")
  sample(["Выборка"])
  vars(["Переменные
        Процедура"])
  empirhyp(["Эмпирические гипотезы"])
  plananalysis(["План анализа"])
  prog("Программирование эксперимента / Составление опроса")
  datacollection("Сбор данных")
  dataanalysis("Анализ данных")
  preproc(["Предобработка данных"])
  desc(["Описательные статистики"])
  statmethods(["Статистические методы"])
  stathyp(["Статистические гипотезы"])
  statres(["Статистические результаты"])
  statinterp(["Статистическая интерпретация"])
  interpretation("Интерпретация результатов")
  discussion("Обсуждение результатов")
  report("Написание отчета")
  
  idea ==> literature
  literature -.-> constructs
  constructs -.-> theorhyp
  literature ==> theorhyp
  theorhyp ==> design
  design --> sample
  design --> vars
  vars --> empirhyp
  empirhyp --> plananalysis
  design ==> prog
  prog ==> datacollection
  datacollection ==> dataanalysis
  dataanalysis --> preproc
  preproc --> desc
  desc --> statmethods
  statmethods --> stathyp
  stathyp --> statres
  statres --> statinterp
  statinterp --> interpretation
  dataanalysis ==> interpretation
  interpretation ==> discussion
  discussion ==> report
  %% report -.-> idea
  
  %% style sample color:#A3F09C
```

Мы вновь начинаем с **идеи** исследования или **исследовательского вопроса**, прочитываем необходимую **литературу**, при необходимости определяем исследуемые **конструкты** и приходим к **теоретическим гипотезам** нашего исследования.



## Что такое статистика? {#desc-statintro-what-is-stat}

:::{.lab-junior}
:::

Чем же в итоге занимается статистика? Что она изучает?

:::{#def-statistics}
**Статистика** --- это междисциплинарная область знаний, а также практической деятельности, изучающая массовые явления, а также принципы и методы работы с данными, характеризующими эти явления [@sirotin2018].
:::

Это, пожалуй, наиболее общее определение, которое весьма красиво звучит, но явно требует пояснений.

Массовые явления затрагивают огромные количества людей. Огромность этих масс, конечно, различна. Скажем, базовые перцептивные закономерности, связанные с тем, как устроена зрительная система, охватывают *всех людей*. Уровень удовлетворенности жизнью россиян охватывает только *население России*. Городские блага петербуржцев --- только для *жителей Санкт-Петербурга*. Учебная мотивация студентов психологического факультета некоторого вуза --- это только про *студентов-психологов этого вуза*. Однако так или иначе эти группы составляет не 5--10 человек, а десятки, сотни, тысячи или миллионы.

Собственно, статистика и возникает именно тогда, когда нам нужно изучать большие --- очень большие --- группы людей. Можно было бы, наверно, озадачится изучением всех представителей интересующей нас группы, однако это требует много времени и денег --- ни того, ни другого, как правило, в наличии не присутствует. Приходится ограничиваться рассмотрением *части интересующей нас группы людей*.



## Выборка и генеральная совокупность {#desc-statintro-population-sample}

:::{.lab-junior}
:::

Одним из ключевых понятий статистики является **генеральная совокупность (population)** --- множество всех [существующих] исследуемых объектов, а также сведения о них. **Объемом генеральной совокупности** ($N$) называют число объектов, составляющих генеральную совокупность. Как мы отметили выше, $N$ в подавляющем большинстве случаев крайне велико, поэтому мы не можем работать с генеральной совокупностью целиком --- в ходе исследования мы работаем с *выборкой*.

**Выборка, или выборочная совокупность (sample)** --- это некоторая часть генеральной совокупности, формируемая в ходе проведения исследований. Выборка характеризуется **объёмом** ($n$), при этом объем выборки всегда существенно меньше объёма генеральной совокупности ($n \ll N$[^ll_symbol]).

[^ll_symbol]: Символ $\ll$ читается как «много меньше».

Получается следующая логика (@fig-sampling-inference):

1. мы **формируем выборку (sampling)** из генеральной совокупности
2. изучаем получившуюся выборку в исследовании
3. по полученным результатам **делаем выводы (inference)** о генеральной совокупности

![Выборка и генеральная совокупность](img/desc-statintro/sampling-inference.png){#fig-sampling-inference}



## Признаки, параметры, оценки {#desc-statintro-param-estim}

:::{.lab-junior}
:::

В ходе исследования мы изучаем **признаки**, которыми обладают интересующие нас объекты рассматриваемой генеральной совокупности. Эти признаки выражаются *количественно* в определённых **показателях**. В качестве примеров признаков показателей, рассматриваемых в психологически исследованиях, можно привести следующие (@tbl-features):

::: {#tbl-features}

| Признаки                   	| Показатели                                             	|
|----------------------------	|--------------------------------------------------------	|
| Рабочая память             	| Объем рабочей памяти                                   	|
| Нейротизм                  	| Уровень нейротизма по BFI                              	|
| Заработная плата           	| Средняя заработная плата                               	|
| Доход                      	| Совокупный годовой доход после уплаты налогов          	|
| Когнитивная нагрузка       	| Уровень когнитивной нагрузки по ЭЭГ-коррелятам         	|
| Доверие к ИИ               	| Уровень доверия к ИИ по опроснику TAIA                 	|
| Индивидуализм/коллективизм 	| Индекс индивидуализма/коллективизма по модели Хофстеде 	|

Примеры признаков и показателей в психологических исследованиях

:::

Признаки могут быть очень разными, как и показатели, которыми мы их пытаемся измерить, однако независимо от того, какой признак и с помощью какого показателя мы пытаемся изучать, *генеральная совокупность характеризуется некоторым параметром*.

:::{#def-parameter}
**Параметр** ($\theta$) --- относительно постоянная [от одной совокупности к другой] величина, характеризующая генеральную совокупность по некоторому показателю.
:::

Что это значит? Что по сути есть этот *параметр*? Это значит, что *в принципе* существуют

* средний уровень нейротизма по BFI студентов-психологов города Москвы
* средний уровень доверия к ИИ по опроснику TAIA россиян пенсионного возраста
* средний уровень когнитивной нагрузки по ЭЭГ-коррелятам ($\alpha$ band, $\beta$ band, $\theta$ band)

и так далее. Проблем заключается в том, что

:::{.callout-important .save-font-size appearance="minimal"}
**величина параметра, который мы изучаем, неизвестна и никогда не будет известна.**
:::

Стоп, что?

Хотя понятно, как вычислить *средний уровень нейротизма по BFI студентов-психологов города Москвы* --- взять всех студентов-психологов Москвы, дать им заполнить опросник BFI, посчитать балл по шкале «нейротизм», сложить результаты и разделить на количество студентов --- на деле *такое провернуть невозможно*. Но почему? Причины две:

* В Москве слишком много студентов-психологов --- мы не сможем собрать данные со всех-всех-всех
* Любое наше измерение всегда содержит ошибку --- независимо от того физическое оно или психологическое

Аналогично дело обстоит с любыми другими параметрами.

Что же делать? Собственно за этим мы и формируем выборку. Мы не можем измерить величину параметра точно, но можем *предсказать её с определённой статистической точностью*, измеряя показатели на выборке. 

Выборка имеет ограниченный объём, и, измерив величину показателя у каждого объекта выборки, мы получим **[выборочную] оценку параметра (estimation)** ($\hat \theta$) --- эмпирический (измеримый) аналог параметра. В частности, если у нас есть выборка из 100 студентов-психологов Москвы, вполне возможно за некоторое время собрать данных по уровню их нейротизма с помощью опросника BFI и вычислить среднее арифметическое по этим 100 наблюдениям.

Далее мы часто будем говорить о параметрах генеральной совокупности и выборочных оценках, сейчас же приведем несколько примеров и обозначений, чтобы придать теоретическим речам некоторое фактическое содержание (@tbl-param-estim).

:::{#tbl-param-estim}

| Параметр генеральной совокупности                              	| Выборочная оценка                                       	|
|----------------------------------------------------------------	|---------------------------------------------------------	|
| $\mu$ --- генеральное среднее                                  	| $\hat \mu$, $\bar x$ --- выборочное среднее              	|
| $\sigma^2$ --- стандартное отклонение генеральной совокупности 	| $\hat \sigma^2$, $s^2$ --- дисперсия выборки            	|
| $\rho$ --- коэффициент корреляции генеральной совокупности     	| $\hat \rho$, $r$ --- выборочный коэффициент корреляции 	|

Примеры параметров и выборочных оценок

:::

Параметры генеральной совокупности традиционно обозначают греческими буквами. Для выборочных оценок используют соответствующие греческим латинские буквы или же надевают на греческие шляпку ( $\hat \,$ ), чтобы отличать их от параметров.


### Зачем нужна статистика? {#desc-statintro-why-do-we-need-stat}

:::{.lab-junior}
:::

Мы в какой-то малоприятной ситуации… Мы хотим измерить то, что в определенном смысле невозможно измерить --- параметры генеральной совокупности --- при этом достаточно точно, чтобы потом это можно было сравнивать или строить какие-то модели. Задача выглядит заведомо провальной…

Однако именно в этот момент на помощь нам приходит статистика. Не в гордом одиночестве, конечно. Она проводит с собой теорию измерений, психометрику, теорию обнаружения сигнала и др. Всё это работает в нашей психологической науке в комплексе. Мы же сейчас сосредотачиваемся на статистической части этого салата.

Статистика даёт нам теоретический и математический инструментарий, чтобы мы могли делать какие-либо выводы по нашим собранным данным. К сожалению, как бы нам ни хотелось, мы не можем делать выводы по сырым данным, потому что измерения по выборке не отражают вот прям ровно то, что есть в генеральной совокупности. Нам их надо определенным образом обсчитать, чтобы наши выводы были корректными. Этим и занимается статистика.

Возможно, сейчас это звучит достаточно абстрактно, но на данном этапе будет достаточно некоторого интуитивного понимание того, зачем нужна статистика. Далее это обрастёт содержанием и уложится, я надеюсь, в достаточно стройную систему.

Итого,

:::{.callout-note .save-font-size appearance="minimal"}
статистика обеспечает возможность делать выводы о генеральной совокупности по выборке.
:::


### Этапы статистического моделирования {#desc-statintro-stat-modelling}

:::{.lab-middle}
:::

Обобщение результатов исследования, проведенного на выборке, на всю генеральную совокупность происходит в ходе **статистического моделирования**. Хотя это словосочетание обычно пробуждает в сознании ассоциации, связанные с большими вычисления и чуть ли не искусственным интеллектом, на самом деле, любой статистический анализ --- даже самая обычная простая линейная регрессия --- это уже статистическое моделирование. Ведь мы берем некоторую математическую модель, примеряем её к данным и делаем выводы о том, насколько хорошо она работает.

В статистическом моделировании независимо от того, какую именно модель мы строим или какой анализ проводим, можно выделить несколько этапов:

* **Определение целей и задач моделирования**
    * Здесь нам необходимо ответить на вопрос: что мы вообще пытаемся смоделировать и для чего? Этот этап неразрывно связан с определением целей и задач исследования в целом.
    * Как отмечалось выше, анализ данных, который по сути и есть статистическое моделирование, должен быть согласован с гипотезами и исследовательским вопросом --- этот этам ровно при эту согласованность.
* **Формализация модели**
    * Здесь нам надо принципиально понять, каков тип статистических моделей нам подходит для моделирования изучаемой закономерности.
    * Изучаем ли мы линейные взаимосвязи или нам необходимо нелинейная модель? Есть ли у нас группировка в данных, которую необходимо учесть, или нет? И другие вопросы, которые нам необходимо задать уже на этапе *дизайна исследования*, а именно --- *планирования анализа данных*.
* **Спецификация модели**
    * На этом этапе мы уточняем модель до уровня переменных (и их взаимодействий), которые в неё будут входить.
    * Иногда этот этап переносят ниже --- после сбора и предобработки данных --- однако согласно современным взглядам, это не вполне корректно.
    * Спецификация модели, как и формализация, является частью *планирования анализа данных*, то есть подэтапом *дизайна исследования*. Продумывание спецификации модели позволит посмотреть на дизайн исследования «аналитическим» взглядом и обнаружить потенциальные проблемы (например, взаимодействия трех переменных, которые крайне сложны для интерпретации).
* **Сбор данных и их предобработка**
    * Собственно, стандартная часть исследовательского процесса в любых эмпирических исследованиях.
* **Идентификация модели**
    * Иначе говоря, подбор коэффициентов модели, или вычисление выборочных оценок параметров генеральной совокупности.
* **Анализ модели**
    * Этот этап включает в себя проверку статистической значимости модели в целом и отдельных её коэффициентов, исследование выполнения математических допущений, оценку модели по метрикам качества и др. --- всё, что позволит сказать, насколько хороша получившаяся модель с точки зрения описания изучаемых закономерностей.
* **Верификация модели**
    * На последнем этапе осуществляется тестирование модели на новом наборе данных, то есть на тех наблюдениях, с которыми модель ещё не знакома.
    * Этот этап, прежде всего, актуален для задач машинного обучения, в рамках которого является необходимым шагом, однако иногда встречается и некоторых ситуациях научной и практической аналитики.



### Характеристики статистических данных {#desc-statintro-statdata}

:::{.lab-junior}
:::

Конечно же, статистическое моделирование происходит на **статистических данных**, которые мы собираем в ходе исследования. Эти данные *собираются на выборке* с помощью *измерения* интересующих нас показателей. 

* Мы не можем работать с генеральной совокупностью, поэтому набираем выборку --- выборки между собой имеют право различаться
* Каждый респондент или испытуемый обладает своими особенностями --- мы не знаем, что мы получим в результате конкретного измерения на конкретном изучаемом объекте1
* Любое наше измерение содержит ошибку --- ни один измерительный инструмент не является совершенным

Такое положение дел приводит нас к следующему обстоятельству: статистические данные обладают двумя ключевыми характеристиками --- *неопределенностью* и *вариативностью*.


Мы уже говорили об этих характеристиках данных, когда изучали теорию измерений, однако не лишним будет повторить это еще раз, потому что именно эти две характеристики делают нам всё статистическое веселье с оценками параметров и тестированием гипотез.


* **Неопределенность** нам говорит о том, что мы не знаем, что именно мы получим в результате наших измерений для конкретной выборки.
    * Отсюда чуть позже возникнут *случайные величины*.
* **Вариативность** означает, что наши данные будут различаться от выборки к выборке и от респондента к респонденту.
    * Отсюда возникнут *статистические критерии*, в которых эта характеристика данных будет учтена в ходе тестирования гипотез.

Ну, хорошо. Пусть это будет так. Но неужели мы ничего не можем сделать для того, чтобы наши данные были качественнее, а моделирование точнее?

Разумеется, можем. И не только можем, но и обязаны, если мы хорошие исследователи, а мы именно такие. Нам необходимо позаботиться о *качестве выборки* нашего исследования. Помимо объёма, к которому мы будем ещё неоднократно возвращаться при обсуждении статистических методов, выборка характеризуется ещё и *репрезентативностью*.



## Репрезентативность выборки {#desc-statintro-saple-representativity}

:::{.lab-junior}
:::

Статистика даёт нам теоретический и математический аппарат, который позволяет делать выводы о генеральной совокупности по выборке. Однако если мы криво собрали данные, то никакая математика нас не спасет от некорректных выводов. Как гласит великий вычислительный принцип,

> Garbage in, garbage out.

**Репрезентативность** --- степень соответствия характеристик выборки характеристикам генеральной совокупности.

Например, мы хотим исследовать связь учебной мотивации и академической успеваемости бакалавров психологии. Если мы соберем данные только со своих однокурсников, будет нехорошо, так как в нашу выборку не попали (1) другие курсы психологического бакалавриата нашего вуза, (2) бакалавры-психологи других вузов Москвы и (3) бакалавры-психологи вузов других городов России.

*И так работает всегда.*

:::{.callout-note}
###### Ну, почти

Есть соблазн проводить исследования на студентах-психологах, потому что они достаточно близко и их можно загнать на эксперименты за баллы в итоговую оценку. Более-менее сносно это может работать на каких-то базовых когнитивных феноменах из восприятия и памяти. Обычно у нас нет оснований предполагать[^questionable_statement], что восприятие и память работают по-разному у людей разного возраста и разных социальных страт. Но вот уже с мышлением возникают проблемы.

:::

[^questionable_statement]: Хотя можно привести и множество возражений такому утверждению --- какие именно феномены восприятия? какая конкретно память? и т.д.

**Почему выборка должна быть репрезентативной?** Потому что если мы *делаем нормально*, то хотим обобщать результаты нашего исследования, полученные на выборке, на генеральную совокупность. Если выборка нерепрезентативна, то мы не можем этого сделать. Зачем в таком случае проводить исследование --- решительно неясно.

Можно выделить три (четыре) условных шага, которые позволят сформировать репрезентативную выборку:

0. Осознать, **кто наша генеральная совокупность**, так как для каждой генеральной совокупности репрезентативная выборка будет своя.
1. Понять, **есть ли какая-то группировка, _важная для нашего исследования_, в нашей генеральной совокупности** --- социальная страта, специальность образования, сфера работы, пол / гендер, возрастные группы, регион проживания, семейное положение, что-либо ещё.
2. Рассчитать **достаточный объём выборки**. Это не самая простая задача и о ней мы будем говорить отдельно, обсуждая каждый статистический метод. Пока отметим в назывном порядке, что на объем выборки будут влиять дизайн исследования, изменчивость признака, уровень значимости и размер эффекта [что бы это ни значило].
3. Обеспечить **случайное попадание респондентов в выборку**.

Здесь надо остановиться подробнее. Если у нас есть ресурсы набрать много людей в выборку (скажем, раза в 2--3 больше, чем достаточный объем выборки), то можно просто случайным образом откуда-то доставать людей --- и всё будет хорошо. Закон больших чисел и центральная предельная теорема говорят, что наша выборка будет репрезентативной. Пока примем это как данность, позже поговорим об это подробнее.

Если мы всё же не можем набрать много человеков, то надо набрать выборку достаточного объема и проверить репрезентативна ли она --- отражает ли выборка те группировки объектов, которые есть в генеральной совокупности.

*Идеальная выборка* --- это когда каждый человек имеет равную вероятность попасть в число респонтентов / испытуемых. Полностью случайный отбор трудно достижим --- это очень дорого и логистически сложно --- но к нему нужно стремиться. Сам метод сбора данных также может деформировать выборку (например, онлайн опросы отсекают пенсионеров), поэтому думать о сборе данных необходимо уже на этапе планирования исследования.



### Способы формирования репрезентативной выборки {#desc-statintro-sample-types}

:::{.lab-junior}
:::




### Вероятностная выборка {#desc-statintro-probability-sampling}

**Вероятностная выборка (probability sampling)** подразумевает, что каждый представитель генеральной совокупности может оказаться в выборке. Именно такие способы преимущественно используются в количественных исследованиях, так как позволяют сформировать репрезентативную выборку.


##### Простая случайная выборка {#desc-statintro-simple-random-sample}

:::{.lab-junior}
:::

Самый простой способ, которым можно набрать репрезентативную выборку --- это **простая случайная выборка (simple random sample)**.

Пусть у нас есть некоторая генеральная совокупность (@fig-simple-random-sample-1). Мы можем извлечь из неё достаточно большое количество наблюдений случайным образом, и получить репрезентативную выборку (@fig-simple-random-sample-4).

Хотя это, пожалуй, самый простой способ формирования выборки, поскольку он не требует учета каких-либо характеристик изучаемых объектов, у него есть один существенный недостаток: обязательное условие репрезентативности выборки --- её *большой объем*. В случае если у нас нет ресурсов для сбора данных большом количестве объектов или от большого количества респондентов, репрезентативность находится по угрозой (иллюстрации [-@fig-simple-random-sample-2] и [-@fig-simple-random-sample-3]).

```{r desc-statintro-simple-random-sample-data}
n_pop <- 600
set.seed(100)
tibble(x = sample(0:1000, n_pop),
  y = sample(0:1000, n_pop),
  little_sample = sample(c(TRUE, FALSE), n_pop, prob = c(1, 9), replace = TRUE),
  medium_sample = sample(c(TRUE, FALSE), n_pop, prob = c(2, 8), replace = TRUE),
  big_sample = sample(c(TRUE, FALSE), n_pop, prob = c(4, 6), replace = TRUE)) -> data_simple_random_sample

data_simple_random_sample %>% 
  ggplot(aes(x, y)) +
  geom_point() +
  guides(x = "none",
  y = "none") +
  labs(x = "", y = "") -> simple_random_sample_graph

data_simple_random_sample %>% 
  ggplot(aes(x, y, color = little_sample)) +
  geom_point() +
  scale_color_manual(values = c(`TRUE` = "#000000", `FALSE` = "#E0E0E0")) +
  guides(x = "none",
  y = "none",
  color = "none") +
  labs(x = "", y = "") -> simple_random_sample_little_sample_graph

data_simple_random_sample %>% 
  ggplot(aes(x, y, color = medium_sample)) +
  geom_point() +
  scale_color_manual(values = c(`TRUE` = "#000000", `FALSE` = "#E0E0E0")) +
  guides(x = "none",
  y = "none",
  color = "none") +
  labs(x = "", y = "") -> simple_random_sample_medium_sample_graph

data_simple_random_sample %>% 
  ggplot(aes(x, y, color = big_sample)) +
  geom_point() +
  scale_color_manual(values = c(`TRUE` = "#000000", `FALSE` = "#E0E0E0")) +
  guides(x = "none",
  y = "none",
  color = "none") +
  labs(x = "", y = "") -> simple_random_sample_big_sample_graph
```

```{r desc-statintro-simple-random-sample}
#| label: fig-simple-random-sample
#| fig-cap: "Простая случайная выборка"
#| fig-subcap:
#|   - "Генеральная совокупность"
#|   - "Выборка малого объема"
#|   - "Выборка среднего объема"
#|   - "Выборка большого объема"
#| layout-ncol: 2

print(simple_random_sample_graph)
print(simple_random_sample_little_sample_graph)
print(simple_random_sample_medium_sample_graph)
print(simple_random_sample_big_sample_graph)
```


##### Стратифицированная выборка {#desc-statintro-stratified-sample}

:::{.lab-junior}
:::

**Стратифицированная выборка (stratified sample)** применима, когда генеральная совокупность разбивается на несколько обособленных и различных по своей природе групп (страт). Например, по полу, уровню образования, возрастной группе и т. д. Далее из каждой группы случайным образом извлекается несколько объектов, которые попадают в выборку.

Из каждой страты можно извлечь одинаковое количество объектов или рассчитать количество представителей каждой страты в итоговой выборке пропорционально объему каждой страты. Последний вариант обеспечит дополнительную репрезентативность с точки зрения соотношения представителей разных стран в выборке, если это необходимо с точки зрения дизайна исследования.

Например, у нашей генеральной совокупности есть четыре страты (@fig-stratified-sample-1). Тогда мы можем разделить её на четыре «подгенеральных совокупности» (subpopulations) соответственно (@fig-stratified-sample-2). Из каждой такой «подгенеральной совокупности» будем извлекать случайную выборку --- в данном случае пропорционально объему страты (@fig-stratified-sample-3). Выбранные объекты составят итоговую выборку исследования.

```{r desc-statintro-stratified-sample-data}
set.seed(600)
tibble(x = runif(1500), 
       y = runif(1500), 
       strat = sample(c("A", "B", "C", "D"), 1500, 
                      replace = TRUE, prob = c(.15, .2, .4, .25)),
       smpl = sample(c(TRUE, FALSE), 1500, 
                     replace = TRUE, prob = c(.2, .8))) -> strat_pop
```

```{r desc-statintro-stratified-sample-pics}
strat_pop %>% 
  ggplot(aes(x, y, color = strat)) +
  geom_point() +
  guides(x = "none", y = "none") +
  scale_color_manual(values = c("#359DD2", "#E57E39", "#36D38C", "#808080")) +
  labs(x = "", y = "", color = "Stratum") +
  theme(legend.position = "bottom") -> strat_pop_all

strat_pop %>% 
  ggplot(aes(x, y, color = strat)) +
  geom_point() +
  guides(x = "none", y = "none", color = "none") +
  scale_color_manual(values = c("#359DD2", "#E57E39", "#36D38C", "#808080")) +
  facet_wrap(~ strat) +
  labs(x = "", y = "", color = "Stratum") +
  theme(legend.position = "bottom") -> strat_pop_by_strat

strat_pop %>% 
  ggplot(aes(x, y, color = strat, alpha = smpl)) +
  geom_point() +
  guides(x = "none", y = "none", color = "none", alpha = "none") +
  scale_color_manual(values = c("#359DD2", "#E57E39", "#36D38C", "#808080")) +
  facet_wrap(~ strat) +
  labs(x = "", y = "", color = "Stratum") +
  theme(legend.position = "bottom") -> strat_pop_by_strat_sample
```

```{r desc-statintro-simple-random-sample}
#| label: fig-stratified-sample
#| fig-cap: "Стратифицированная выборка"
#| fig-subcap:
#|   - "Генеральная совокупность"
#|   - "Генеральная совокупность, разделенная по стратам"
#|   - "Итоговая выборка с учетом страт (простая случайная из каждой страты пропорционально её объему)"
#| layout: [[50, 50], [100]]

print(strat_pop_all)
print(strat_pop_by_strat)
print(strat_pop_by_strat_sample)
```




##### Групповая выборка {#desc-statintro-cluster-sample}

:::{.lab-junior}
:::

Генеральная совокупность разбивается на несколько обособленных, но одинаковых групп (кластеров). Например, население города группируется по району проживания
Выбираются случайным образом несколько групп
Из каждой группы случайным образом выбираются несколько объектов, которые попадают в выборку.
Пусть мы разделили нашу генеральную совокупность на 8 кластеров:
Кластеры у нас примерно одинаковые по характеристикам между собой — по крайне мере, мы так предполагаем. Выберем случайно четыре кластера, которые примут участие в исследовании:
Теперь из этих кластеров наберем выборку (допустим, по 20 наблюдений из кластера) случайным образом (объекты, попавшие в итоговую выборку отмечены черным контуром, не попавшие — серым):
Такой подход к формированию выборки позволяет экономить драгоценные ресурсы при проведении исследования.



##### Систематическая выборка {#desc-statintro-systematic-sample}

:::{.lab-middle}
:::

Случайная систематическая выборка
Линейная систематическая выборка
Круговая систематическая выборка



### Невероятностная выборка {#desc-statintro-nonprobability-sampling}

:::{.lab-middle}
:::

non-probability sampling

#### Convenience sampling

:::{.lab-middle}
:::

#### Voluntary response sampling

:::{.lab-middle}
:::

#### Purposive sampling

:::{.lab-middle}
:::

#### Snowball sampling

:::{.lab-middle}
:::

#### Quota sampling

:::{.lab-middle}
:::


## Виды статистики {#desc-statintro-kinds-of-stat}

:::{.lab-junior}
:::

Статистика как набор методов и инструментов работы с данными может быть разделена на два вида: *описательная статистика* и *статистика вывода*.

* **Описательная статистика (descriptive statistics[^desc-stat])** занимается обработкой статистических данных, их наглядным представлением, и собственно описанием через некоторые характеристики.
    * Эти характеристики, количественно описывающие особенности имеющихся данных, называются **описательными статистиками (descriptive statistics[^desc-stats])**.
    * *Задача описательной статистики* --- ёмко описать имеющиеся данные и составить на основе этих описаний общее представление о них, а также обнаружить особенности, которые могут повлиять на дальнейший анализ.
* **Статистика вывода (inferential statistics)** занимается поиском ответов на содержательные вопросы, которые мы задаем данным в ходе их анализа в рамках научных и практических исследований.
Состоит из двух компонентов --- *тестирования статистических гипотез* и *статистических методов*.

[^desc-stat]: Mass (uncountable) noun.
[^desc-stats]: Countable noun, plural in this case.

:::{.callout-note}
###### Замечание о машинном обучении

Часто в высокообразованных кругах слышится словосочетание «машинное обучение». Иногда его причисляют к статистике, иногда рассматривают отдельно. На самом же деле, статистические методы лежат где-то между статистикой вывода и машинным обучением.

Почему?

Дело в том, что на статистические методы можно смотреть по-разному.

* Если нашей задачей является поиск ответов на **исследовательские** вопросы о закономерностях, о связи каких-либо факторов или влиянии переменных друг на друга, то мы будем смотреть на статистические модели с точки зрения статистики вывода. Это позволит нам находить ответы на интересующие нас вопросы --- причем не важно, говорим мы о научных исследованиях или об исследованиях в индустрии.
* Если перед нами стоит задача хорошо **предсказывать** одни переменные на основании значений других — например, выдавать рекомендации на Яндекс Музыке или в Яндекс Лавке --- то мы будем смотреть на те же статистические модели с точки зрения машинного обучения.

То есть, модели в анализе данных и машинном обучении одни и те же, но то, какую модель мы назовем хорошей и как мы эту «хорошесть» определим, будет отличаться в зависимости от задачи --- исследовательская или предиктивная --- которая перед нами стоит.
:::



```{=html}
<script type="text/javascript" src="./js/chapter.js"></script>
```
