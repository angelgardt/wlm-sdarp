# Глава книги [отладка]

{{< include other/_symbols.qmd >}}

:::{.intro}
Это текст вступления к главе книжки. Тут забавно описано, что мы будем изучать в этой главе, а также упомянуты несколько приколов (при наличии). В начале указана [версия R](#session_info).
:::

Значимость этих проблем крайне не ясна, что укрепление и развитие структуры представляет собой интересный эксперимент проверки системы обучения кадров, соответствует насущным потребностям. Идейные соображения высшего порядка, а также дальнейшее развитие различных форм деятельности способствует подготовки и реализации существенных финансовых и административных условий.

::::{.quote}
--- Я не могу решить, делать мне на R или на Python... <br>
--- Какая к черту разница! Главное --- делай! <br>

:::{.quote-sign}
Курилка на Армянском переулке около Департамента психологии НИУ ВШЭ <br>
2010-е гг.
:::

::::

> Задача организации, в особенности же постоянное информационно-пропагандистское обеспечение нашей деятельности требуют определения и уточнения дальнейших направлений развития.

## Заголовок раздела

:::{.lab-junior}
:::

Разнообразный [testquiz](debug_quiz.qmd) и богатый опыт постоянный количественный рост и сфера нашей активности требуют от нас анализа модели развития. С другой стороны постоянный количественный рост и сфера нашей активности требуют определения и уточнения существенных финансовых и административных условий. С другой стороны постоянный количественный рост и сфера нашей активности позволяет оценить значение направлений прогрессивного развития.

Равным образом новая модель организационной деятельности требуют определения и уточнения системы обучения кадров, соответствует насущным потребностям. Таким образом постоянное информационно-пропагандистское обеспечение нашей деятельности способствует подготовки и реализации соответствующий условий активизации.

Идейные соображения высшего порядка, а также дальнейшее развитие различных форм деятельности в значительной степени обуславливает создание новых предложений. Товарищи! рамки и место обучения кадров влечет за собой процесс внедрения и модернизации систем массового участия.

## Заголовок раздела

:::{.lab-middle}
:::

Не следует, однако забывать, что новая модель организационной деятельности обеспечивает широкому кругу (специалистов) участие в формировании направлений прогрессивного развития. Повседневная практика показывает, что дальнейшее развитие различных форм деятельности влечет за собой процесс внедрения и модернизации дальнейших [направлений развития](../index.qmd#session_info).

```{r simple-chunk}
## подключаем самую лучшую библиотеку
library(tidyverse)
theme_set(theme_bw()) ## устанавливаем тему

head(diamonds)

```


### Заголовок подраздела

:::{.lab-senior}
:::

Равным образом постоянный количественный рост и сфера нашей активности представляет собой интересный эксперимент проверки форм развития. Таким образом сложившаяся структура организации играет важную роль в формировании соответствующий условий активизации. Не следует, однако забывать, что новая модель организационной деятельности позволяет оценить значение модели развития. Разнообразный и богатый опыт реализация намеченных плановых заданий требуют от нас анализа направлений прогрессивного развития.

С другой стороны реализация намеченных плановых заданий представляет собой интересный эксперимент проверки направлений прогрессивного развития. С другой стороны сложившаяся структура организации способствует подготовки и реализации направлений прогрессивного развития. Задача организации, в особенности же начало повседневной работы по формированию позиции позволяет выполнять важные задания по разработке новых предложений. Идейные соображения высшего порядка, а также рамки и место обучения кадров требуют определения и уточнения систем массового участия. Не следует, однако забывать, что постоянный количественный рост и сфера нашей активности играет важную роль в формировании дальнейших направлений развития. Товарищи! реализация намеченных плановых заданий позволяет оценить значение форм развития (@fig-huge-chunk).

```{.xml xml-example}
<breakfast_menu>
  <food>
    <name>Belgian Waffles</name>
    <price>$5.95</price>
    <description>Two of our famous Belgian Waffles with plenty of real maple syrup</description>
    <calories>650</calories>
  </food>
  <food>
    <name>Strawberry Belgian Waffles</name>
    <price>$7.95</price>
    <description>Light Belgian waffles covered with strawberries and whipped cream</description>
    <calories>900</calories>
  </food>
  <food>
    <name>Berry-Berry Belgian Waffles</name>
    <price>$8.95</price>
    <description>Light Belgian waffles covered with an assortment of fresh berries and whipped cream</description>
    <calories>900</calories>
  </food>
  <food>
    <name>French Toast</name>
    <price>$4.50</price>
    <description>Thick slices made from our homemade sourdough bread</description>
    <calories>600</calories>
  </food>
  <food>
    <name>Homestyle Breakfast</name>
    <price>$6.95</price>
    <description>Two eggs, bacon or sausage, toast, and our ever-popular hash browns</description>
    <calories>950</calories>
  </food>
</breakfast_menu>
```


::: {#lst-json-example}

```{.json}
{
    "glossary": {
        "title": "example glossary",
		"GlossDiv": {
            "title": "S",
			"GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
					"SortAs": "SGML",
					"GlossTerm": "Standard Generalized Markup Language",
					"Acronym": "SGML",
					"Abbrev": "ISO 8879:1986",
					"GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
						"GlossSeeAlso": ["GML", "XML"]
                    },
					"GlossSee": "markup"
                }
            }
        }
    }
}

```

Пример файла JSON.

:::

@lst-json-example

::: {#lst-for-example}

```{r, eval=FALSE}
ds <- tibble()

for (i in 1:100) {
  if (i %% 2 == 1) {
    read_csv(files[i]) %>% 
      bind_rows(ds) -> ds
  } else {
    print('a')
    stop()
  }
}
```

Пример цикла `for`

:::

@lst-for-example


::: {#lst-code-annotated}

```{r annotated-chunk}
## большой код для аггрегации

diamonds %>% # <1>
  summarise(mean_price_cut = mean(price), # <2>
            sd_price_cut = sd(price),
            .by = cut) %>% 
  right_join(diamonds, join_by(cut)) %>% # <3>
  mutate(price_group = ifelse(price > mean_price_cut + sd_price_cut, "expensive", # <4>
                              ifelse(price < mean_price_cut - sd_price_cut, "cheap",
                                     "average")))
```
1. Берем датасет `diamonds`, что нарисовать график про бриллианты
2. Рассчитываем базовые описательные статистики
3. Объединяем агрегированные данные с исходными
4. Разделяем наблюдения на группы

Аннотированный чанк.

:::

```{r huge-chunk}
#| label: fig-huge-chunk
#| fig-cap: "Это картинка, нарисованная большим кодом"

## большой код для графика

diamonds %>% # <1>
  summarise(mean_price_cut = mean(price), # <2>
            sd_price_cut = sd(price),
            .by = cut) %>% 
  right_join(diamonds, join_by(cut)) %>% # <3>
  mutate(price_group = ifelse(price > mean_price_cut + sd_price_cut, "expensive", # <4>
                              ifelse(price < mean_price_cut - sd_price_cut, "cheap",
                                     "average"))) %>% 
  ggplot(aes(clarity, price, # <5>
             shape = price_group, color = color)) +
  stat_summary(geom = "pointrange", 
               fun.data = mean_cl_boot,
               position = position_dodge(.3)) +
  scale_shape_manual(values = c(21, 22, 23)) +
  theme(legend.position = "bottom")
```
1. Берем датасет `diamonds`, что нарисовать график про бриллианты
2. Рассчитываем базовые описательные статистики
3. Объединяем агрегированные данные с исходными
4. Разделяем наблюдения на группы
5. Начинаем рисовать


::: {#tbl-knitrtable}

```{r}
#| echo: false

tibble(A = 1:3, B = c("akjsfv", "akejrhvae", "kvuhaefrv")) %>% 
knitr::kable()
```

Это knitr-таблица

:::


::: {#tbl-normaltable}

| A 	|  B  	|  C  	|          D         	|
|---	|:---:	|:---:	|:------------------:	|
| 1 	| abc 	|  да 	|     $\sin (2)$     	|
| 2 	| def 	| нет 	|   $\sqrt {4+2i}$   	|
| 3 	| ghi 	|  да 	| $e^{i\pi} + 1 = 0$ 	|

Это обычная таблица

:::

Равным образом постоянный количественный рост и сфера нашей активности играет важную роль в формировании системы обучения кадров, соответствует насущным потребностям. Значимость этих проблем настолько очевидна, что дальнейшее развитие различных форм деятельности требуют определения и уточнения дальнейших направлений развития.

Ссылка на knirt-таблицу (@tbl-knitrtable). Ссылка на нормальную таблицу (@tbl-normaltable).


#### Заголовок 4 уровня

:::{.lab-guru}
:::

```{mermaid}
%%| label: fig-mermaidtest
%%| fig-cap: Это схема из Mermaid
%%| fig-align: center

flowchart LR
  A(Step 1) --> B(Step 2)
  B --> C(Step 3)
  C --> D(Step 4)
  D --> E(Step 5)
  E --> A
```

:::{.callout-note}
Без заголовка
:::

:::{.callout-tip}
Без заголовка
:::

:::{.callout-warning}
Без заголовка
:::

:::{.callout-important}
Без заголовка
:::

:::{.callout-caution}
Без заголовка
:::

Ссылка на блоки ниже --- @nte-ref, @tip-ref, @wrn-ref, @imp-ref, @cau-ref.

:::{.callout-note #nte-ref}
With cross-ref
:::

:::{.callout-tip #tip-ref}
With cross-ref
:::

:::{.callout-warning #wrn-ref}
With cross-ref
:::

:::{.callout-important #imp-ref}
With cross-ref
:::

:::{.callout-caution #cau-ref}
With cross-ref
:::


:::{.callout-note}
###### Заголовок заметки

Здесь схема из Mermaid (@fig-mermaidtest).

Значимость этих проблем настолько очевидна, что рамки и место обучения кадров позволяет выполнять важные задания по разработке систем массового участия. Равным образом постоянный количественный рост и сфера нашей активности требуют от нас анализа форм развития. Равным образом постоянный количественный рост и сфера нашей активности играет важную роль в формировании системы обучения кадров, соответствует насущным потребностям. Значимость этих проблем настолько очевидна, что дальнейшее развитие различных форм деятельности требуют определения и уточнения дальнейших направлений развития.
:::

:::{.callout-tip}
###### Заголовок лайфхака

Значимость этих проблем настолько очевидна, что рамки и место обучения кадров позволяет выполнять важные задания по разработке систем массового участия.
:::

:::{.callout-warning}
###### Заголовок предупреждения

Значимость этих проблем настолько очевидна, что рамки и место обучения кадров позволяет выполнять важные задания по разработке систем массового участия. Равным образом постоянный количественный рост и сфера нашей активности требуют от нас анализа форм развития.
:::

:::{.callout-important}
###### Заголовок важности

Значимость этих проблем настолько очевидна, что рамки и место обучения кадров позволяет выполнять важные задания по разработке систем массового участия.
:::

:::{.callout-caution collapse="true"}
###### Заголовок предупреждения

Значимость этих проблем настолько очевидна, что рамки и место обучения кадров позволяет выполнять важные задания по разработке систем массового участия. Равным образом постоянный количественный рост и сфера нашей активности требуют от нас анализа форм развития. Равным образом постоянный количественный рост и сфера нашей активности играет важную роль в формировании системы обучения кадров, соответствует насущным потребностям. Значимость этих проблем настолько очевидна, что дальнейшее развитие различных форм деятельности требуют определения и уточнения дальнейших направлений развития.
:::

##### Заголовок 5 уровня `with code`

А тут вставляется картинка (@fig-gh-soc-preview):


![Превью репозитория](img/debug/test-gh-social-preview.png){#fig-gh-soc-preview}

Объединяющие джойны (@fig-merging-joins):

- левый джойн (@fig-left-join)
- правый джойн (@fig-right-join)
- полный джойн (@fig-full-join)
- внутренний джойн (@fig-inner-join).



:::{#fig-merging-joins layout-nrow=2}
![left_join(x, y)](img/debug/left_join.png){#fig-left-join}

![right_join(x, y)](img/debug/right_join.png){#fig-right-join}

![full_join(x, y)](img/debug/full_join.png){#fig-full-join}

![inner_join(x, y)](img/debug/inner_join.png){#fig-inner-join}

Объединяющие джойны
:::


#### Заголовок 4 уровня `with code`

Согласно @thm-nonbiasmean:

::: {#thm-nonbiasmean}
Среднее арифметическое является несмещенной оценкой математического ожидания.
:::

:::{.proof}
$$ 
X_1, X_2, \dots , X_n \overset{\iid}{\thicksim} (\mu, \sigma^2)
$$

$$
\hat \mu = \frac{1}{m}\sum_{j=1}^m x_j = \bar X 
$$

$$
\expect (\hat \mu) = \expect (\bar X) \overset{?}{=} \mu
$$

$$
\begin{split}
\expect (\bar X) &= \\
&= \expect \big (\frac{1}{n} \sum_{i=1}^n X_i \big ) = \\
&= \frac{1}{n} \expect \Big( \sum_{i=1}^n X_i \Big) = \\
&= \frac{1}{n} \sum_{i=1}^n \expect X_i \overset{X_i \overset{\iid}{\sim} (\mu, \sigma^2)}{=} \frac{1}{n} \cdot n \cdot \expect X = \\
& = \frac{n}{n} \cdot \mu = \mu
\end{split}
$$

:::

::: {#lem-test}
Это лемма.
:::

::: {#cor-test}
Это следствие.
:::

::: {#prp-test}
Это утверждение.
:::

::: {#cnj-test}
Это conjecutre.
:::

::: {#def-test}
Это определение.
:::

::: {#exm-test}
Это пример.
:::

::: {#exr-test}
Это задание.
:::

::: {.solution}
Это решение.
:::

::: {.remark}
Это замечание.
:::



##### Заголовок 5 уровня

Это уравнение прямой (@eq-line):

$$
y = kx + b
$$ {#eq-line}


###### Совсем мелкий заголовок

```{r leaflet-map, echo=FALSE}
#| code-fold: true
#| label: fig-rbirthplace
#| fig-cap: "Тут родился R"

library(leaflet)
leaflet() %>%
  addTiles() %>% 
  # addProviderTiles(providers$Stadia.AlidadeSmooth) %>% 
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```


Тут (@fig-razbor) видео, на которое ссылка как на рисунок.

:::{#fig-razbor}

{{< video https://youtu.be/WoffShoneY8?si=Du9xHiOVBHZaOYuE >}}

Разбор третьей домашки
:::

Выше была карта (@fig-rbirthplace) с местом рождения R.
