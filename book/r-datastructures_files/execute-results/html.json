{
  "hash": "cb43fc6bef7d1d47a6fd539ddd78249b",
  "result": {
    "engine": "knitr",
    "markdown": "# Структуры данных {#r-datastructures}\n\n<!--- {{< include other/_symbols.qmd >}} --->\n\n\\usepackage{xcolor}\n\\usepackage{soul}\n\\usepackage{amsmath, amsfonts, amssymb}\n\\usepackage{tensor}\n\\usepackage[bb=tgdm]{unicode-math}\n\\usepackage{tikz}\n\\usepackage{mathtools}\n\\usepackage[makeroom]{cancel}\n\n\n<!--- Decorations --->\n\\newcommand{\\circled}[1]{\\enclose{circle}{#1}}\n\\newcommand{\\boxed}[1]{\\enclose{box}{#1}}\n\n\n<!--- Common --->\n\\newcommand{\\const}{\\text{const}}\n\\newcommand{\\fix}{\\text{fix}}\n\\DeclareMathOperator{\\mmod}{mod}\n\\DeclareMathOperator{\\sgn}{sgn}\n\\newcommand{\\lp}{\\left(}\n\\newcommand{\\rp}{\\right)}\n\\newcommand{\\lb}{\\left[}\n\\newcommand{\\rb}{\\right]}\n\\newcommand{\\suchd}{\\,:\\,}\n\n\n<!--- Logic --->\n\\newcommand{\\xor}{\\veebar}\n\n\n<!--- Set theory --->\n\\newcommand{\\univ}{\\mathbb{U}}\n\\DeclareMathOperator{\\symdif}{\\triangle}\n\\newcommand{\\such}{\\, | \\,}\n\\newcommand{\\emptyset}{\\varnothing}\n\\newcommand{\\geq}{\\geqslant}\n\\newcommand{\\leq}{\\leqslant}\n\\newcommand{\\compl}{\\overline}\n\n<!--- Combinatorics --->\n\\newcommand{\\perm}[1]{\\mathsf{P}_{#1}}\n\\newcommand{\\vari}[3][]{{}^\\mathsf{{#1}}\\mathsf{V}_{#2}^{#3}}\n\\newcommand{\\comb}[3][]{{}^\\mathsf{{#1}}\\mathsf{C}_{#2}^{#3}}\n\n\n\n<!--- Number sets--->\n\\newcommand{\\setN}{\\mathbb{N}}\n\\newcommand{\\setNstar}{\\mathbb{N}^{\\ast}}\n\\newcommand{\\setZ}{\\mathbb{Z}}\n\\newcommand{\\setQ}{\\mathbb{Q}}\n\\newcommand{\\setI}{\\mathbb{I}}\n\\newcommand{\\setR}{\\mathbb{R}}\n\\newcommand{\\setRplus}{\\mathbb{R}_{+}}\n\\newcommand{\\setC}{\\mathbb{C}}\n\n<!--- Linear Algebra --->\n\\newcommand{\\vm}[1]{\\mathbf{#1}} <!--- vectors and matrices --->\n\\newcommand{\\tp}[1]{{#1}\\!^{\\mathsf{T}}}\n\\newcommand{\\inv}[1]{{#1}\\!^{-1}}\n\\DeclareMathOperator{\\tr}{tr}\n\\DeclareMathOperator{\\rank}{rank}\n\n<!--- Probability, Random Vars --->\n\\newcommand{\\Fcal}{\\mathcal{F}}\n\\newcommand{\\Bcal}{\\mathcal{B}}\n\\newcommand{\\prob}{\\mathbb{P}}\n\\newcommand{\\dens}{\\mathbb{p}}\n\\newcommand{\\expect}{\\mathbb{E}}\n\\newcommand{\\disp}{\\mathbb{D}}\n\\newcommand{\\var}{\\text{var}}\n\\newcommand{\\cov}{\\text{cov}}\n\\newcommand{\\cor}{\\text{cor}}\n\\newcommand{\\se}{\\text{se}}\n\\newcommand{\\sd}{\\text{sd}}\n\\newcommand{\\iid}{\\text{i.i.d.}}\n\n\\newsavebox{\\MBox}\n\\newcommand{\\Cline}[2][red]{{\\sbox\\MBox{$#2$}%\n  \\rlap{\\usebox\\MBox}\\color{#1}\\rule[-1.2\\dp\\MBox]{\\wd\\MBox}{0.5pt}}}\n\n<!--- Distributions --->\n\\newcommand{\\norm}{\\mathcal{N}}\n\n<!--- Other --->\n\\newcommand{\\defin}{\\overset{\\text{def}}{=}}\n\\newcommand{\\toas}{\\overset{\\text{a.s.}}{\\to}}\n\\newcommand{\\toprob}{\\overset{p}{\\to}}\n\\newcommand{\\todist}{\\overset{d}{\\to}}\n\n<!--- Trig --->\n\\DeclareMathOperator\\artanh{artanh}\n\n<!--- Stats --->\n\\newcommand{\\median}{\\text{median}}\n\\newcommand{\\mean}{\\mathbb{M}}\n\\newcommand{\\skewness}{\\text{skew}}\n\\newcommand{\\kurtosis}{\\text{kurt}}\n\n\n<!--- Letters --->\n\\newcommand{\\phi}{\\varphi}\n\\newcommand{\\epsilon}{\\varepsilon}\n\n\n::: {.cell}\n\n:::\n\n\n:::{.intro}\nВступление\n:::\n\n::::{.quote}\n--- Текст цитаты <br>\n--- Тоже текст цитаты <br>\n\n:::{.quote-sign}\nИсточник цитаты <br>\nГод цитаты\n:::\n\n::::\n\n> Цитата\n\n\n\n\n## Заголовок раздела {#chapterid-sectionid}\n\n:::{.lab-junior}\n:::\n\nТест со [ссылкой](debug_quiz.qmd).\n\n\n### Заголовок подраздела {#chapterid-subsectionid}\n\n:::{.lab-junior}\n:::\n\nТест со [ссылкой](debug_sheet.qmd).\n\n\n\n\n## Примеры `кода` {#chapterid-code-examples}\n\n:::{.lab-middle}\n:::\n\n\n### Чанк без подписи {#chapterid-code-nolst}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## подключаем самую лучшую библиотеку\nlibrary(tidyverse)\ntheme_set(theme_bw()) ## устанавливаем тему\n\nhead(diamonds)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 10\n  carat cut       color clarity depth table price     x     y     z\n  <dbl> <ord>     <ord> <ord>   <dbl> <dbl> <int> <dbl> <dbl> <dbl>\n1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43\n2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31\n3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31\n4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63\n5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75\n6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48\n```\n\n\n:::\n:::\n\n\n\n### Чанк с подписью {#chapterid-code-lst}\n\n::: {#lst-code-example}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nds <- tibble()\n\nfor (i in 1:100) {\n  if (i %% 2 == 1) {\n    read_csv(files[i]) %>% \n      bind_rows(ds) -> ds\n  } else {\n    print('a')\n    stop()\n  }\n}\n```\n:::\n\n\nПример чанка с подписью\n\n:::\n\nСсылка на чанк с подписью (@lst-for-example).\n\n\n### Аннотированный чанк {#chapterid-code-annotated}\n\n::: {#lst-code-annotated}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## большой код для агрегации\n\ndiamonds %>% # <1>\n  summarise(mean_price_cut = mean(price), # <2>\n            sd_price_cut = sd(price),\n            .by = cut) %>% \n  right_join(diamonds, join_by(cut)) %>% # <3>\n  mutate(price_group = ifelse(price > mean_price_cut + sd_price_cut, \"expensive\", # <4>\n                              ifelse(price < mean_price_cut - sd_price_cut, \"cheap\",\n                                     \"average\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 53,940 × 13\n   cut   mean_price_cut sd_price_cut carat color clarity depth table price     x\n   <ord>          <dbl>        <dbl> <dbl> <ord> <ord>   <dbl> <dbl> <int> <dbl>\n 1 Ideal          3458.        3808.  0.23 E     SI2      61.5    55   326  3.95\n 2 Ideal          3458.        3808.  0.23 J     VS1      62.8    56   340  3.93\n 3 Ideal          3458.        3808.  0.31 J     SI2      62.2    54   344  4.35\n 4 Ideal          3458.        3808.  0.3  I     SI2      62      54   348  4.31\n 5 Ideal          3458.        3808.  0.33 I     SI2      61.8    55   403  4.49\n 6 Ideal          3458.        3808.  0.33 I     SI2      61.2    56   403  4.49\n 7 Ideal          3458.        3808.  0.33 J     SI1      61.1    56   403  4.49\n 8 Ideal          3458.        3808.  0.23 G     VS1      61.9    54   404  3.93\n 9 Ideal          3458.        3808.  0.32 I     SI1      60.9    55   404  4.45\n10 Ideal          3458.        3808.  0.3  I     SI2      61      59   405  4.3 \n# ℹ 53,930 more rows\n# ℹ 3 more variables: y <dbl>, z <dbl>, price_group <chr>\n```\n\n\n:::\n:::\n\n1. Берем датасет `diamonds`, что нарисовать график про бриллианты\n2. Рассчитываем базовые описательные статистики\n3. Объединяем агрегированные данные с исходными\n4. Разделяем наблюдения на группы\n\n:::\n\n\n\n\n## Примеры иллюстраций {#chapterid-figures}\n\n:::{.lab-senior}\n:::\n\n\n### Импорт графического файла {#chapterid-import-pic}\n\nСсылка на импортированную картинку (@fig-gh-soc-preview):\n\n![Превью репозитория](img/test-gh-social-preview.png){#fig-gh-soc-preview}\n\n\n### График, построенный с помощью кода {#chapterid-plot}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## большой код для графика\n\ndiamonds %>% # <1>\n  summarise(mean_price_cut = mean(price),\n            sd_price_cut = sd(price),\n            .by = cut) %>% \n  right_join(diamonds, join_by(cut)) %>%\n  mutate(price_group = ifelse(price > mean_price_cut + sd_price_cut, \"expensive\",\n                              ifelse(price < mean_price_cut - sd_price_cut, \"cheap\",\n                                     \"average\"))) %>% \n  ggplot(aes(clarity, price,\n             shape = price_group, color = color)) +\n  stat_summary(geom = \"pointrange\", \n               fun.data = mean_cl_boot,\n               position = position_dodge(.3)) +\n  scale_shape_manual(values = c(21, 22, 23)) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![Это картинка, нарисованная большим кодом](r-datastructures_files/figure-html/fig-huge-chunk-1.png){#fig-huge-chunk width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## большой код для графика\n\ndiamonds %>% # <1>\n  summarise(mean_price_cut = mean(price), # <2>\n            sd_price_cut = sd(price),\n            .by = cut) %>% \n  right_join(diamonds, join_by(cut)) %>% # <3>\n  mutate(price_group = ifelse(price > mean_price_cut + sd_price_cut, \"expensive\", # <4>\n                              ifelse(price < mean_price_cut - sd_price_cut, \"cheap\",\n                                     \"average\"))) %>% \n  ggplot(aes(clarity, price, # <5>\n             shape = price_group, color = color)) +\n  stat_summary(geom = \"pointrange\", \n               fun.data = mean_cl_boot,\n               position = position_dodge(.3)) +\n  scale_shape_manual(values = c(21, 22, 23)) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![Это картинка, нарисованная большим кодом, который аннотирован](r-datastructures_files/figure-html/fig-huge-chunk-annotated-1.png){#fig-huge-chunk-annotated width=672}\n:::\n:::\n\n1. Берем датасет `diamonds`, что нарисовать график про бриллианты\n2. Рассчитываем базовые описательные статистики\n3. Объединяем агрегированные данные с исходными\n4. Разделяем наблюдения на группы\n5. Начинаем рисовать\n\n\n### Несколько изображений в одной иллюстрации {#chapterid-several-pics}\n\n:::{#fig-merging-joins layout-nrow=2}\n![left_join(x, y)](img/data-wrangling/left_join.png){#fig-left-join}\n\n![right_join(x, y)](img/data-wrangling/right_join.png){#fig-right-join}\n\n![full_join(x, y)](img/data-wrangling/full_join.png){#fig-full-join}\n\n![inner_join(x, y)](img/data-wrangling/inner_join.png){#fig-inner-join}\n\nОбъединяющие джойны\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(0:1) -> plot1\n```\n\n::: {.cell-output-display}\n![](r-datastructures_files/figure-html/several-plots-one-figure-plots-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(0:2) -> plot2\n```\n\n::: {.cell-output-display}\n![](r-datastructures_files/figure-html/several-plots-one-figure-plots-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(0:3) -> plot3\n```\n\n::: {.cell-output-display}\n![](r-datastructures_files/figure-html/several-plots-one-figure-plots-3.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(0:4) -> plot4\n```\n\n::: {.cell-output-display}\n![](r-datastructures_files/figure-html/several-plots-one-figure-plots-4.png){width=672}\n:::\n:::\n\n::: {#fig-several-plots-one-figure .cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nprint(plot1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(plot2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(plot3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\nprint(plot4)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\nНесколько картинок с помощью кода в одной иллюстрации\n:::\n\n\n\n### Карта {#chapterid-map}\n\n\n::: {.cell}\n::: {#fig-rbirthplace .cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-bf9f8e2858056ffe9616\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-bf9f8e2858056ffe9616\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[-36.852,174.768,null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"The birthplace of R\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[-36.852,-36.852],\"lng\":[174.768,174.768]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n\nТут родился R\n:::\n:::\n\n\nСсылка неа карту (@fig-rbirthplace).\n\n\n### Видео {#chapterid-video}\n\n:::{#fig-razbor}\n\n\n{{< video https://youtu.be/WoffShoneY8?si=Du9xHiOVBHZaOYuE >}}\n\n\n\nРазбор третьей домашки\n:::\n\nСсылка на видео (@fig-razbor).\n\n\n### Схема {#chapterid-scheme}\n\n\n```{mermaid}\n%%| label: fig-mermaidtest\n%%| fig-cap: Это схема из Mermaid\n%%| fig-align: center\n\nflowchart LR\n  A(Step 1) --> B(Step 2)\n  B --> C(Step 3)\n  C --> D(Step 4)\n  D --> E(Step 5)\n  E --> A\n```\n\n\nСсылка на схему (@fig-mermaidtest).\n\n\n\n\n## Таблицы {#chapterid-tables}\n\nСсылка на таблицу из `tibble` (@tbl-kabletable).\n\nСсылка на таблицу из R Markdown (@tbl-markdowntable).\n\n\n### Таблица из `kable()` {#chapterid-kabletable}\n\n::: {#tbl-kabletable}\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|  A|B         |\n|--:|:---------|\n|  1|akjsfv    |\n|  2|akejrhvae |\n|  3|kvuhaefrv |\n\n\n:::\n:::\n\n\nЭто kable-таблица\n\n:::\n\n\n### Таблица из R Markdown {#chapterid-markdowntable}\n\n::: {#tbl-markdowntable}\n\n| A \t|  B  \t|  C  \t|          D         \t|\n|---\t|:---:\t|:---:\t|:------------------:\t|\n| 1 \t| abc \t|  да \t|     $\\sin (2)$     \t|\n| 2 \t| def \t| нет \t|   $\\sqrt {4+2i}$   \t|\n| 3 \t| ghi \t|  да \t| $e^{i\\pi} + 1 = 0$ \t|\n\nЭто Markdown-таблица\n\n:::\n\n## Математика {#chapterid-math}\n\nЭто уравнение прямой (@eq-line):\n\n$$\ny = kx + b\n$$ {#eq-line}\n\n::: {#thm-nonbiasmean}\nЭто теорема.\n:::\n\n:::{.proof}\n\nЭто доказательство.\n\n$$ \nX_1, X_2, \\dots , X_n \\overset{\\iid}{\\thicksim} (\\mu, \\sigma^2)\n$$\n\n:::\n\n::: {#lem-test}\nЭто лемма.\n:::\n\n::: {#cor-test}\nЭто следствие.\n:::\n\n::: {#prp-test}\nЭто утверждение.\n:::\n\n::: {#cnj-test}\nЭто conjecutre.\n:::\n\n::: {#def-test}\nЭто определение.\n:::\n\n::: {#exm-test}\nЭто пример.\n:::\n\n::: {#exr-test}\nЭто задание.\n:::\n\n::::{.solution}\n\n:::{.cell}\nЭто решение\n:::\n::::\n\n::: {.solution}\n<!--Это решение, где есть только код.-->\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(0)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0\n```\n\n\n:::\n:::\n\n:::\n\n::: {.remark}\nЭто замечание.\n:::\n\n\n\n\n## Блоки {#chapterid-callouts}\n\n:::{.callout-note}\n###### Заголовок заметки\n\nТекст заметки.\n:::\n\n:::{.callout-tip}\n###### Заголовок лайфхака\n\nТекст лайфхака.\n:::\n\n:::{.callout-warning}\n###### Заголовок предупреждения\n\nТекст предупреждения.\n:::\n\n:::{.callout-important}\n###### Заголовок важности\n\nТекст важности.\n:::\n\n:::{.callout-caution collapse=\"true\"}\n###### Заголовок предупреждения\n\nТекст предупреждения.\n:::\n\n\n```{=html}\n<script type=\"text/javascript\" src=\"./js/chapter.js\"></script>\n```\n",
    "supporting": [
      "r-datastructures_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}